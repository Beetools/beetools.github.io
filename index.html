<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>CineTalk â€” Multi AI Voice</title>
        <meta name="theme-color" content="#0d0f14" />
        <meta name="description" content="CineTalk - RecomendaÃ§Ãµes de filmes com ChatGPT, Gemini e Convai" />
        <link rel="stylesheet" href="css/style.css" />
    </head>

    <body>
        <div class="container">
            <!-- Top bar -->
            <div class="appbar">
                <div class="brand">
                <div style="font-size:1.6rem">ğŸ¬</div>
                <h1>CineTalk</h1>
                </div>

                <!-- Switch de provedores -->
                <div class="provider-switch">
                <button class="provider-btn active" data-provider="chatgpt">âš¡ ChatGPT</button>
                <button class="provider-btn" data-provider="gemini">âœ¨ Gemini</button>
                <button class="provider-btn" data-provider="convai">ğŸ­ Convai</button>
                </div>

                <div class="conn">
                <span class="dot" id="dot"></span>
                <span id="connTxt">Desconectado</span>
                </div>
            </div>

            <!-- Grid: chat | config -->
            <div class="grid cols-2">
                <!-- Left: chat -->
                <section class="panel">
                <h2>Chat</h2>
                <div class="sticky-tip" id="stickyTip">
                    Clique em "Iniciar" e peÃ§a recomendaÃ§Ãµes de filmes por texto ou voz ğŸ™ï¸
                </div>
                <div id="chat" class="chat" aria-live="polite"></div>

                <div style="margin-top:12px" class="row">
                    <input id="textInput" class="input" placeholder="Digite uma mensagem (Enter para enviar)" style="flex:1" />
                    <button id="sendBtn" class="btn primary">Enviar</button>
                    <button id="copyBtn" class="btn">Copiar</button>
                    <button id="clearBtn" class="btn danger">Limpar</button>
                </div>
                </section>

                <!-- Right: config & controls -->
                <aside class="panel">
                <h2>ConfiguraÃ§Ã£o</h2>

                <!-- API Key dinÃ¢mica por provedor -->
                <div class="field">
                    <label class="label" for="apiKey"><span id="apiKeyLabel">ğŸ”‘ OpenAI API Key</span></label>
                    <input id="apiKey" class="input" type="password" placeholder="sk-..." autocomplete="off" />
                    <small class="muted" id="apiKeyHelp">
                    Use sua API key da OpenAI (ChatGPT). Para produÃ§Ã£o, use um backend/proxy.
                    </small>
                </div>

                <div class="field" id="charIdField" style="margin-top:10px; display:none">
                    <label class="label" for="charId">ğŸ‘¤ Convai Character ID</label>
                    <input id="charId" class="input" type="text" placeholder="ID do personagem do Convai..." />
                    <small class="muted">Usado apenas quando o provedor Convai estÃ¡ selecionado.</small>
                </div>

                <!-- Personalidade -->
                <div class="field" style="margin-top:10px">
                    <label class="label" for="systemPrompt">ğŸ§  Personalidade (opcional)</label>
                    <textarea id="systemPrompt" class="input" rows="4"
                    placeholder="VocÃª Ã© Marco, um curador apaixonado por cinema. Responda curto, liste 2 a 4 filmes relevantes, sem fazer perguntas de volta."></textarea>
                    <small class="muted">Defina como o assistente do provedor atual deve se comportar.</small>
                </div>

                <!-- Voz -->
                <div class="panel" style="margin-top:12px">
                    <h2>Controles de Voz</h2>
                    <div class="controls">
                    <button id="ptt" class="ptt" title="Clique para iniciar/parar">ğŸ¤</button>
                    <div id="status" class="status">Configure a API Key para comeÃ§ar</div>
                    <div id="meter" class="meter" aria-hidden="true">
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                    </div>
                    </div>
                </div>

                <!-- SugestÃµes -->
                <div class="panel" style="margin-top:12px">
                    <h2>Perguntas Sugeridas</h2>
                    <div class="suggestions" id="suggs">
                    <div class="sugg" data-text="Me recomende filmes de ficÃ§Ã£o cientÃ­fica dos anos 80.">ğŸš€ Sci-fi anos 80</div>
                    <div class="sugg" data-text="Quais sÃ©ries de suspense posso ver na Netflix?">ğŸ” Suspense na Netflix</div>
                    <div class="sugg" data-text="Quais filmes mais marcantes do Tarantino?">ğŸ¬ Tarantino</div>
                    <div class="sugg" data-text="Sugira sÃ©ries para assistir em famÃ­lia.">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ SÃ©ries para famÃ­lia</div>
                    <div class="sugg" data-text="Me indique filmes clÃ¡ssicos de cinema noir.">ğŸ•µï¸ Cinema noir</div>
                    <div class="sugg" data-text="Recomende animaÃ§Ãµes premiadas recentes.">ğŸ¨ AnimaÃ§Ãµes premiadas</div>
                    </div>
                </div>
                </aside>
            </div>

            <!-- Info -->
            <section class="panel">
                <h2>â„¹ï¸ Como funciona</h2>
                <p class="muted">
                Selecione o provedor (ChatGPT, Gemini ou Convai) no topo, configure a API Key correspondente
                e faÃ§a perguntas sobre filmes por texto ou voz. O comportamento do bot Ã© controlado pelo campo de personalidade.
                </p>
            </section>
        </div>

        <!-- Toasts -->
        <div id="toasts" class="toast-wrap"></div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
        <script src="js/provider-chatgpt.js"></script>
        <script src="js/provider-gemini.js"></script>
        <script src="js/provider-convai.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>